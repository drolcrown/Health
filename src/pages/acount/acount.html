<ion-header>
  <header [title]="'Minha Conta'" [hideButton]="true"></header>
</ion-header>

<ion-content padding>
  <form *ngIf="form" [formGroup]="form">
    <ion-grid>
      <ion-row align-items-center>
        <ion-col col-4 *ngIf="perfil">
          <img src="{{perfil.imagem}}" class="" #myImage (click)="presentImage(myImage)" />
          <label col-12 for="selecao-arquivo" class="btn btn-dark">
            <!-- <img src="../../assets/icon/camera-with-external-flash.svg" alt="Alterar Imagem" /> -->
            Alterar Imagem
            <input id='selecao-arquivo' class="form-group" type="file" accept="image/*" (change)="salvarArquivo($event)" />
          </label>
        </ion-col>
        <ion-col col-8 align-self-items>
          <strong>Nome</strong>
          <ion-input (ionChange)="salvarAlteracao()" formControlName="nome" type="text" placeholder="nome"></ion-input>
          <strong>Sobrenome</strong>
          <ion-input (ionChange)="salvarAlteracao()" formControlName="sobrenome" type="text" placeholder="Sobrenome"></ion-input>
        </ion-col>
        <ion-col align-items-center col-12>
          <ion-col col-12>
            <strong col-5>Data de Nascimento:</strong>
            <ion-datetime (ionChange)="salvarAlteracao()" min="1940" max="2080-10-31" displayFormat="DD/MM/YYYY" doneText="Confirmar" cancelText="Cancelar"
              formControlName="data"></ion-datetime>
          </ion-col>
          <!-- <ion-input type="text" col-12 formControlName="data" (ionChange)="validar('data', $event)" placeholder="17/03/1993"
            [brmasker]="{mask:'17/03/1993', len:10}"></ion-input> -->
          <strong col-5>Estado:</strong>
          <ion-item color="transparent" no-lines>
            <ion-label col-5 [hidden]="true">Estado:</ion-label >
            <ion-select (ionChange)="salvarAlteracao()" formControlName="estado" cancelText="Cancelar" interface="alert" #slt (ionChange)="getMunicipio(slt.value)">
              <ion-option *ngFor="let uf of _estados" [value]="uf.nome">{{uf.nome}}</ion-option>
            </ion-select>
          </ion-item>
          <strong col-5>Municipio:</strong>
          <ion-item color="transparent" no-lines>
            <ion-label col-5 [hidden]="true">Municipio:</ion-label>
            <ion-select (ionChange)="salvarAlteracao()" formControlName="municipio" cancelText="Cancelar" interface="alert">
              <ion-option>Todas as Regiões</ion-option>
              <ion-option *ngFor="let mun of estadoSelecionadoMun" [value]="mun">{{mun}}</ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
        <ion-col align-items-center col-12 class="text-center" *ngIf="perfil">
          <ion-title>Avaliação</ion-title>
          <ionic3-star-rating activeIcon="ios-star" defaultIcon="ios-star-outline" activeColor="#4FD5EC" defaultColor="#f03d3d"
            readonly="true" [rating]="perfil.avaliacao">
          </ionic3-star-rating>
        </ion-col>
      </ion-row>
      <ion-row justify-content-center class="mt-4">
        <button ion-button color="dark" (click)="trocarSenha(perfil)">Trocar Senha</button>
        <button ion-button color="dark" (click)="excluirConta(perfil)">Excluir Conta</button>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>